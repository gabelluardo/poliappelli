unstable: true

allow:
  - all

imap: import_map.json

scripts:
  dev:
    desc: Runs the script for development
    cmd: cli.ts

  start:
    desc: Runs the script
    cmd: cli.ts
    lock: lock.json
    noCheck: true

  test:
    desc: Testing the script
    cmd: deno test
    noCheck: true

  compile:
    desc: Compile the script
    cmd: deno compile --unstable --lite -A --import-map=import_map.json cli.ts
    lock: lock.json
    noCheck: true

  compile_win:
    desc: Compile the script
    cmd: deno compile --unstable --lite --target x86_64-pc-windows-msvc -A --import-map=import_map.json cli.ts
    lock: lock.json
    noCheck: true

  update:
    desc: Create/update lock.json file
    cmd: deno cache --reload --lock-write cli.ts
    lock: lock.json
